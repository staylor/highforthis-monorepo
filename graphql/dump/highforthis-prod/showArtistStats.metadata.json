{"options":{"viewOn":"show","pipeline":[{"$match":{"attended":true}},{"$unwind":"$artists"},{"$group":{"_id":"$artists","count":{"$sum":{"$numberInt":"1"}}}},{"$lookup":{"from":"artist","localField":"_id","foreignField":"_id","as":"artist_info"}},{"$project":{"entity":{"$arrayElemAt":["$artist_info",{"$numberInt":"0"}]},"count":{"$numberInt":"1"}}},{"$sort":{"count":{"$numberInt":"-1"},"entity.name":{"$numberInt":"1"}}}]},"indexes":[],"collectionName":"showArtistStats","type":"view"}